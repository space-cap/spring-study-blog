<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: "NanumGothic", sans-serif; }
        .container { width: 100%; margin: 0 auto; }
        .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; }
        .header h1 { margin: 0; }
        .content { margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .summary { margin-top: 20px; padding: 15px; border: 1px solid #ddd; background-color: #f9f9f9; }
        .summary h3 { margin-top: 0; }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>일일 매출 보고서</h1>
        <p th:text="${reportDate}"></p>
    </div>

    <div class="content">
        <h2>거래 내역</h2>
        <table>
            <thead>
            <tr>
                <th>시간</th>
                <th>고객명</th>
                <th>결제 수단</th>
                <th>금액</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="tx : ${transactions}">
                <td th:text="${#temporals.format(tx.transactionDate, 'HH:mm:ss')}"></td>
                <td th:text="${tx.billing.medicalRecord.customer.name}"></td>
                <td th:text="${tx.paymentMethod}"></td>
                <td th:text="${#numbers.formatDecimal(tx.amount, 0, 'COMMA', 0, 'POINT')} + '원'"></td>
            </tr>
            <tr th:if="${#lists.isEmpty(transactions)}">
                <td colspan="4" style="text-align: center;">해당 날짜의 거래 내역이 없습니다.</td>
            </tr>
            </tbody>
        </table>

        <div class="summary">
            <h3>매출 요약</h3>
            <p><strong>총 매출: </strong><span th:text="${#numbers.formatDecimal(totalRevenue, 0, 'COMMA', 0, 'POINT')} + '원'"></span></p>
            <div th:if="${!revenueByMethod.isEmpty()}">
                <strong>결제 수단별 매출:</strong>
                <ul>
                    <li th:each="entry : ${revenueByMethod}">
                        <span th:text="${entry.key}"></span>: <span th:text="${#numbers.formatDecimal(entry.value, 0, 'COMMA', 0, 'POINT')} + '원'"></span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>
